{"ast":null,"code":"import _defineProperty from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutProperties from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _wrapNativeSuper from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _slicedToArray from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _assertThisInitialized from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _objectSpread from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _createClass from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"F:/asd/leandro/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nvar _excluded = [\"defer\", \"json\"],\n    _excluded2 = [\"resource\"],\n    _excluded3 = [\"resource\"];\nimport React, { useEffect, useRef, useReducer, useCallback, useDebugValue, useMemo } from 'react';\n/* istanbul ignore file */\n\n/**\n * Universal global scope object. In the browser this is `self`, in Node.js and React Native it's `global`.\n * This file is excluded from coverage reporting because these globals are environment-specific so we can't test them all.\n */\n\nvar globalScope = function () {\n  if (typeof self === \"object\" && self.self === self) return self;\n  if (typeof global === \"object\" && global.global === global) return global;\n  if (typeof global === \"object\" && global.GLOBAL === global) return global;\n  return {}; // fallback that relies on imported modules to be singletons\n}();\n/**\n * Globally available object used to connect the DevTools to all React Async instances.\n */\n\n\nglobalScope.__REACT_ASYNC__ = globalScope.__REACT_ASYNC__ || {};\n\nvar noop = function noop() {};\n\nvar MockAbortController = /*#__PURE__*/_createClass(function MockAbortController() {\n  _classCallCheck(this, MockAbortController);\n\n  this.abort = noop;\n  this.signal = {};\n});\n\nvar PropTypes;\n\ntry {\n  PropTypes = require(\"prop-types\");\n} catch (e) {}\n\nvar childrenFn = PropTypes && PropTypes.oneOfType([PropTypes.node, PropTypes.func]);\nvar stateObject = PropTypes && PropTypes.shape({\n  initialValue: PropTypes.any,\n  data: PropTypes.any,\n  error: PropTypes.instanceOf(Error),\n  value: PropTypes.any,\n  startedAt: PropTypes.instanceOf(Date),\n  finishedAt: PropTypes.instanceOf(Date),\n  status: PropTypes.oneOf([\"initial\", \"pending\", \"fulfilled\", \"rejected\"]),\n  isInitial: PropTypes.bool,\n  isPending: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  isFulfilled: PropTypes.bool,\n  isResolved: PropTypes.bool,\n  isRejected: PropTypes.bool,\n  isSettled: PropTypes.bool,\n  counter: PropTypes.number,\n  promise: PropTypes.instanceOf(Promise),\n  run: PropTypes.func,\n  reload: PropTypes.func,\n  cancel: PropTypes.func,\n  setData: PropTypes.func,\n  setError: PropTypes.func\n});\nvar propTypes = PropTypes && {\n  Async: {\n    children: childrenFn,\n    promise: PropTypes.instanceOf(Promise),\n    promiseFn: PropTypes.func,\n    deferFn: PropTypes.func,\n    watch: PropTypes.any,\n    watchFn: PropTypes.func,\n    initialValue: PropTypes.any,\n    onResolve: PropTypes.func,\n    onReject: PropTypes.func,\n    reducer: PropTypes.func,\n    dispatcher: PropTypes.func,\n    debugLabel: PropTypes.string,\n    suspense: PropTypes.bool\n  },\n  Initial: {\n    children: childrenFn,\n    state: stateObject.isRequired,\n    persist: PropTypes.bool\n  },\n  Pending: {\n    children: childrenFn,\n    state: stateObject.isRequired,\n    initial: PropTypes.bool\n  },\n  Fulfilled: {\n    children: childrenFn,\n    state: stateObject.isRequired,\n    persist: PropTypes.bool\n  },\n  Rejected: {\n    children: childrenFn,\n    state: stateObject.isRequired,\n    persist: PropTypes.bool\n  },\n  Settled: {\n    children: childrenFn,\n    state: stateObject.isRequired,\n    persist: PropTypes.bool\n  }\n};\n\nvar renderFn = function renderFn(children) {\n  if (typeof children === \"function\") {\n    var render = children;\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return render.apply(void 0, args);\n  }\n\n  return children;\n};\n/**\n * Renders only when no promise has started or completed yet.\n *\n * @prop {Function|Node} children Function (passing state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} persist Show until we have data, even while pending (loading) or when an error occurred\n */\n\n\nvar IfInitial = function IfInitial(_ref) {\n  var children = _ref.children,\n      persist = _ref.persist,\n      _ref$state = _ref.state,\n      state = _ref$state === void 0 ? {} : _ref$state;\n  return React.createElement(React.Fragment, null, state.isInitial || persist && !state.data ? renderFn(children, state) : null);\n};\n/**\n * Renders only while pending (promise is loading).\n *\n * @prop {Function|Node} children Function (passing state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} initial Show only on initial load (data is undefined)\n */\n\n\nvar IfPending = function IfPending(_ref2) {\n  var children = _ref2.children,\n      initial = _ref2.initial,\n      _ref2$state = _ref2.state,\n      state = _ref2$state === void 0 ? {} : _ref2$state;\n  return React.createElement(React.Fragment, null, state.isPending && (!initial || !state.value) ? renderFn(children, state) : null);\n};\n/**\n * Renders only when promise is resolved.\n *\n * @prop {Function|Node} children Function (passing data and state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} persist Show old data while pending (promise is loading)\n */\n\n\nvar IfFulfilled = function IfFulfilled(_ref3) {\n  var children = _ref3.children,\n      persist = _ref3.persist,\n      _ref3$state = _ref3.state,\n      state = _ref3$state === void 0 ? {} : _ref3$state;\n  return React.createElement(React.Fragment, null, state.isFulfilled || persist && state.data ? renderFn(children, state.data, state) : null);\n};\n/**\n * Renders only when promise is rejected.\n *\n * @prop {Function|Node} children Function (passing error and state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} persist Show old error while pending (promise is loading)\n */\n\n\nvar IfRejected = function IfRejected(_ref4) {\n  var children = _ref4.children,\n      persist = _ref4.persist,\n      _ref4$state = _ref4.state,\n      state = _ref4$state === void 0 ? {} : _ref4$state;\n  return React.createElement(React.Fragment, null, state.isRejected || persist && state.error ? renderFn(children, state.error, state) : null);\n};\n/**\n * Renders only when promise is fulfilled or rejected.\n *\n * @prop {Function|Node} children Function (passing state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} persist Show old data or error while pending (promise is loading)\n */\n\n\nvar IfSettled = function IfSettled(_ref5) {\n  var children = _ref5.children,\n      persist = _ref5.persist,\n      _ref5$state = _ref5.state,\n      state = _ref5$state === void 0 ? {} : _ref5$state;\n  return React.createElement(React.Fragment, null, state.isSettled || persist && state.value ? renderFn(children, state) : null);\n};\n\nif (propTypes) {\n  IfInitial.propTypes = propTypes.Initial;\n  IfPending.propTypes = propTypes.Pending;\n  IfFulfilled.propTypes = propTypes.Fulfilled;\n  IfRejected.propTypes = propTypes.Rejected;\n  IfSettled.propTypes = propTypes.Settled;\n}\n\nvar StatusTypes;\n\n(function (StatusTypes) {\n  StatusTypes[\"initial\"] = \"initial\";\n  StatusTypes[\"pending\"] = \"pending\";\n  StatusTypes[\"fulfilled\"] = \"fulfilled\";\n  StatusTypes[\"rejected\"] = \"rejected\";\n})(StatusTypes || (StatusTypes = {}));\n\nvar getInitialStatus = function getInitialStatus(value, promise) {\n  if (value instanceof Error) return StatusTypes.rejected;\n  if (value !== undefined) return StatusTypes.fulfilled;\n  if (promise) return StatusTypes.pending;\n  return StatusTypes.initial;\n};\n\nvar getIdleStatus = function getIdleStatus(value) {\n  if (value instanceof Error) return StatusTypes.rejected;\n  if (value !== undefined) return StatusTypes.fulfilled;\n  return StatusTypes.initial;\n};\n\nvar getStatusProps = function getStatusProps(status) {\n  return {\n    status: status,\n    isInitial: status === StatusTypes.initial,\n    isPending: status === StatusTypes.pending,\n    isLoading: status === StatusTypes.pending,\n    isFulfilled: status === StatusTypes.fulfilled,\n    isResolved: status === StatusTypes.fulfilled,\n    isRejected: status === StatusTypes.rejected,\n    isSettled: status === StatusTypes.fulfilled || status === StatusTypes.rejected\n  };\n}; // This exists to make sure we don't hold any references to user-provided functions\n// The way NeverSettle extends from Promise is complicated, but can't be done differently because Babel doesn't support\n// extending built-in classes. See https://babeljs.io/docs/en/caveats/#classes\n\n\nvar NeverSettle = function NeverSettle() {};\n/* istanbul ignore next */\n\n\nif (Object.setPrototypeOf) {\n  Object.setPrototypeOf(NeverSettle, Promise);\n} else {\n  NeverSettle.__proto__ = Promise;\n}\n\nNeverSettle.prototype = Object.assign(Object.create(Promise.prototype), {\n  finally: function _finally() {\n    return this;\n  },\n  catch: function _catch() {\n    return this;\n  },\n  then: function then() {\n    return this;\n  }\n});\nvar neverSettle = new NeverSettle();\nvar ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[\"start\"] = \"start\";\n  ActionTypes[\"cancel\"] = \"cancel\";\n  ActionTypes[\"fulfill\"] = \"fulfill\";\n  ActionTypes[\"reject\"] = \"reject\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar init = function init(_ref6) {\n  var initialValue = _ref6.initialValue,\n      promise = _ref6.promise,\n      promiseFn = _ref6.promiseFn;\n  return _objectSpread(_objectSpread({\n    initialValue: initialValue,\n    data: initialValue instanceof Error ? undefined : initialValue,\n    error: initialValue instanceof Error ? initialValue : undefined,\n    value: initialValue,\n    startedAt: promise || promiseFn ? new Date() : undefined,\n    finishedAt: initialValue ? new Date() : undefined\n  }, getStatusProps(getInitialStatus(initialValue, promise || promiseFn))), {}, {\n    counter: 0,\n    promise: neverSettle\n  });\n};\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case ActionTypes.start:\n      return _objectSpread(_objectSpread(_objectSpread({}, state), {}, {\n        startedAt: new Date(),\n        finishedAt: undefined\n      }, getStatusProps(StatusTypes.pending)), {}, {\n        counter: action.meta.counter,\n        promise: action.meta.promise\n      });\n\n    case ActionTypes.cancel:\n      return _objectSpread(_objectSpread(_objectSpread({}, state), {}, {\n        startedAt: undefined,\n        finishedAt: undefined\n      }, getStatusProps(getIdleStatus(state.error || state.data))), {}, {\n        counter: action.meta.counter,\n        promise: action.meta.promise\n      });\n\n    case ActionTypes.fulfill:\n      return _objectSpread(_objectSpread(_objectSpread({}, state), {}, {\n        data: action.payload,\n        value: action.payload,\n        error: undefined,\n        finishedAt: new Date()\n      }, getStatusProps(StatusTypes.fulfilled)), {}, {\n        promise: action.meta.promise\n      });\n\n    case ActionTypes.reject:\n      return _objectSpread(_objectSpread(_objectSpread({}, state), {}, {\n        error: action.payload,\n        value: action.payload,\n        finishedAt: new Date()\n      }, getStatusProps(StatusTypes.rejected)), {}, {\n        promise: action.meta.promise\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar dispatchMiddleware = function dispatchMiddleware(dispatch) {\n  return function (action) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    dispatch.apply(void 0, [action].concat(args));\n\n    if (action.type === ActionTypes.start && typeof action.payload === \"function\") {\n      action.payload();\n    }\n  };\n};\n\nvar Async = /*#__PURE__*/function (_React$Component) {\n  _inherits(Async, _React$Component);\n\n  var _super = _createSuper(Async);\n\n  function Async() {\n    _classCallCheck(this, Async);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(Async);\n}(React.Component);\n/**\n * createInstance allows you to create instances of Async that are bound to a specific promise.\n * A unique instance also uses its own React context for better nesting capability.\n */\n\n\nfunction createInstance() {\n  var defaultOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var displayName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Async\";\n\n  var _React$createContext = React.createContext(undefined),\n      UnguardedConsumer = _React$createContext.Consumer,\n      Provider = _React$createContext.Provider;\n\n  function Consumer(_ref7) {\n    var children = _ref7.children;\n    return React.createElement(UnguardedConsumer, null, function (value) {\n      if (!value) {\n        throw new Error(\"this component should only be used within an associated <Async> component!\");\n      }\n\n      return children(value);\n    });\n  }\n\n  var Async = /*#__PURE__*/function (_React$Component2) {\n    _inherits(Async, _React$Component2);\n\n    var _super2 = _createSuper(Async);\n\n    function Async(props) {\n      var _this;\n\n      _classCallCheck(this, Async);\n\n      _this = _super2.call(this, props);\n      _this.mounted = false;\n      _this.counter = 0;\n      _this.args = [];\n      _this.promise = neverSettle;\n      _this.abortController = new MockAbortController();\n      _this.start = _this.start.bind(_assertThisInitialized(_this));\n      _this.load = _this.load.bind(_assertThisInitialized(_this));\n      _this.run = _this.run.bind(_assertThisInitialized(_this));\n      _this.cancel = _this.cancel.bind(_assertThisInitialized(_this));\n      _this.onResolve = _this.onResolve.bind(_assertThisInitialized(_this));\n      _this.onReject = _this.onReject.bind(_assertThisInitialized(_this));\n      _this.setData = _this.setData.bind(_assertThisInitialized(_this));\n      _this.setError = _this.setError.bind(_assertThisInitialized(_this));\n      var promise = props.promise;\n      var promiseFn = props.promiseFn || defaultOptions.promiseFn;\n      var initialValue = props.initialValue || defaultOptions.initialValue;\n      _this.state = _objectSpread(_objectSpread({}, init({\n        initialValue: initialValue,\n        promise: promise,\n        promiseFn: promiseFn\n      })), {}, {\n        cancel: _this.cancel,\n        run: _this.run,\n        reload: function reload() {\n          var _this2;\n\n          _this.load();\n\n          (_this2 = _this).run.apply(_this2, _toConsumableArray(_this.args));\n        },\n        setData: _this.setData,\n        setError: _this.setError\n      });\n      _this.debugLabel = props.debugLabel || defaultOptions.debugLabel;\n      var devToolsDispatcher = globalScope.__REACT_ASYNC__.devToolsDispatcher;\n\n      var _reducer = props.reducer || defaultOptions.reducer;\n\n      var _dispatcher = props.dispatcher || defaultOptions.dispatcher || devToolsDispatcher;\n\n      var reducer$1 = _reducer ? function (state, action) {\n        return _reducer(state, action, reducer);\n      } : reducer;\n      var dispatch = dispatchMiddleware(function (action, callback) {\n        _this.setState(function (state) {\n          return reducer$1(state, action);\n        }, callback);\n      });\n      _this.dispatch = _dispatcher ? function (action) {\n        return _dispatcher(action, dispatch, props);\n      } : dispatch;\n      return _this;\n    }\n\n    _createClass(Async, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.mounted = true;\n\n        if (this.props.promise || !this.state.initialValue) {\n          this.load();\n        }\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        var _this$props = this.props,\n            watch = _this$props.watch,\n            _this$props$watchFn = _this$props.watchFn,\n            watchFn = _this$props$watchFn === void 0 ? defaultOptions.watchFn : _this$props$watchFn,\n            promise = _this$props.promise,\n            promiseFn = _this$props.promiseFn;\n\n        if (watch !== prevProps.watch) {\n          if (this.counter) this.cancel();\n          return this.load();\n        }\n\n        if (watchFn && watchFn(_objectSpread(_objectSpread({}, defaultOptions), this.props), _objectSpread(_objectSpread({}, defaultOptions), prevProps))) {\n          if (this.counter) this.cancel();\n          return this.load();\n        }\n\n        if (promise !== prevProps.promise) {\n          if (this.counter) this.cancel();\n          if (promise) return this.load();\n        }\n\n        if (promiseFn !== prevProps.promiseFn) {\n          if (this.counter) this.cancel();\n          if (promiseFn) return this.load();\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.cancel();\n        this.mounted = false;\n      }\n    }, {\n      key: \"getMeta\",\n      value: function getMeta(meta) {\n        return _objectSpread({\n          counter: this.counter,\n          promise: this.promise,\n          debugLabel: this.debugLabel\n        }, meta);\n      }\n    }, {\n      key: \"start\",\n      value: function start(promiseFn) {\n        var _this3 = this;\n\n        if (\"AbortController\" in globalScope) {\n          this.abortController.abort();\n          this.abortController = new globalScope.AbortController();\n        }\n\n        this.counter++;\n        return this.promise = new Promise(function (resolve, reject) {\n          if (!_this3.mounted) return;\n\n          var executor = function executor() {\n            return promiseFn().then(resolve, reject);\n          };\n\n          _this3.dispatch({\n            type: ActionTypes.start,\n            payload: executor,\n            meta: _this3.getMeta()\n          });\n        });\n      }\n    }, {\n      key: \"load\",\n      value: function load() {\n        var _this4 = this;\n\n        var promise = this.props.promise;\n        var promiseFn = this.props.promiseFn || defaultOptions.promiseFn;\n\n        if (promise) {\n          this.start(function () {\n            return promise;\n          }).then(this.onResolve(this.counter)).catch(this.onReject(this.counter));\n        } else if (promiseFn) {\n          var props = _objectSpread(_objectSpread({}, defaultOptions), this.props);\n\n          this.start(function () {\n            return promiseFn(props, _this4.abortController);\n          }).then(this.onResolve(this.counter)).catch(this.onReject(this.counter));\n        }\n      }\n    }, {\n      key: \"run\",\n      value: function run() {\n        var _this5 = this;\n\n        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        var deferFn = this.props.deferFn || defaultOptions.deferFn;\n\n        if (deferFn) {\n          this.args = args;\n\n          var props = _objectSpread(_objectSpread({}, defaultOptions), this.props);\n\n          return this.start(function () {\n            return deferFn(args, props, _this5.abortController);\n          }).then(this.onResolve(this.counter), this.onReject(this.counter));\n        }\n      }\n    }, {\n      key: \"cancel\",\n      value: function cancel() {\n        var onCancel = this.props.onCancel || defaultOptions.onCancel;\n        onCancel && onCancel();\n        this.counter++;\n        this.abortController.abort();\n        this.mounted && this.dispatch({\n          type: ActionTypes.cancel,\n          meta: this.getMeta()\n        });\n      }\n    }, {\n      key: \"onResolve\",\n      value: function onResolve(counter) {\n        var _this6 = this;\n\n        return function (data) {\n          if (_this6.counter === counter) {\n            var onResolve = _this6.props.onResolve || defaultOptions.onResolve;\n\n            _this6.setData(data, function () {\n              return onResolve && onResolve(data);\n            });\n          }\n\n          return data;\n        };\n      }\n    }, {\n      key: \"onReject\",\n      value: function onReject(counter) {\n        var _this7 = this;\n\n        return function (error) {\n          if (_this7.counter === counter) {\n            var onReject = _this7.props.onReject || defaultOptions.onReject;\n\n            _this7.setError(error, function () {\n              return onReject && onReject(error);\n            });\n          }\n\n          return error;\n        };\n      }\n    }, {\n      key: \"setData\",\n      value: function setData(data, callback) {\n        this.mounted && this.dispatch({\n          type: ActionTypes.fulfill,\n          payload: data,\n          meta: this.getMeta()\n        }, callback);\n        return data;\n      }\n    }, {\n      key: \"setError\",\n      value: function setError(error, callback) {\n        this.mounted && this.dispatch({\n          type: ActionTypes.reject,\n          payload: error,\n          error: true,\n          meta: this.getMeta()\n        }, callback);\n        return error;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props2 = this.props,\n            children = _this$props2.children,\n            suspense = _this$props2.suspense;\n\n        if (suspense && this.state.isPending && this.promise !== neverSettle) {\n          // Rely on Suspense to handle the loading state\n          throw this.promise;\n        }\n\n        if (typeof children === \"function\") {\n          var render = children;\n          return React.createElement(Provider, {\n            value: this.state\n          }, render(this.state));\n        }\n\n        if (children !== undefined && children !== null) {\n          return React.createElement(Provider, {\n            value: this.state\n          }, children);\n        }\n\n        return null;\n      }\n    }]);\n\n    return Async;\n  }(React.Component);\n\n  if (propTypes) Async.propTypes = propTypes.Async;\n\n  var AsyncInitial = function AsyncInitial(props) {\n    return React.createElement(Consumer, null, function (st) {\n      return React.createElement(IfInitial, Object.assign({}, props, {\n        state: st\n      }));\n    });\n  };\n\n  var AsyncPending = function AsyncPending(props) {\n    return React.createElement(Consumer, null, function (st) {\n      return React.createElement(IfPending, Object.assign({}, props, {\n        state: st\n      }));\n    });\n  };\n\n  var AsyncFulfilled = function AsyncFulfilled(props) {\n    return React.createElement(Consumer, null, function (st) {\n      return React.createElement(IfFulfilled, Object.assign({}, props, {\n        state: st\n      }));\n    });\n  };\n\n  var AsyncRejected = function AsyncRejected(props) {\n    return React.createElement(Consumer, null, function (st) {\n      return React.createElement(IfRejected, Object.assign({}, props, {\n        state: st\n      }));\n    });\n  };\n\n  var AsyncSettled = function AsyncSettled(props) {\n    return React.createElement(Consumer, null, function (st) {\n      return React.createElement(IfSettled, Object.assign({}, props, {\n        state: st\n      }));\n    });\n  };\n\n  AsyncInitial.displayName = \"\".concat(displayName, \".Initial\");\n  AsyncPending.displayName = \"\".concat(displayName, \".Pending\");\n  AsyncFulfilled.displayName = \"\".concat(displayName, \".Fulfilled\");\n  AsyncRejected.displayName = \"\".concat(displayName, \".Rejected\");\n  AsyncSettled.displayName = \"\".concat(displayName, \".Settled\");\n  return Object.assign(Async, {\n    displayName: displayName,\n    Initial: AsyncInitial,\n    Pending: AsyncPending,\n    Loading: AsyncPending,\n    Fulfilled: AsyncFulfilled,\n    Resolved: AsyncFulfilled,\n    Rejected: AsyncRejected,\n    Settled: AsyncSettled\n  });\n}\n\nvar Async$1 = createInstance();\n\nfunction useAsync(arg1, arg2) {\n  var options = typeof arg1 === \"function\" ? _objectSpread(_objectSpread({}, arg2), {}, {\n    promiseFn: arg1\n  }) : arg1;\n  var counter = useRef(0);\n  var isMounted = useRef(true);\n  var lastArgs = useRef(undefined);\n  var lastOptions = useRef(options);\n  var lastPromise = useRef(neverSettle);\n  var abortController = useRef(new MockAbortController());\n  var devToolsDispatcher = globalScope.__REACT_ASYNC__.devToolsDispatcher;\n  var reducer$1 = options.reducer,\n      _options$dispatcher = options.dispatcher,\n      dispatcher = _options$dispatcher === void 0 ? devToolsDispatcher : _options$dispatcher;\n\n  var _useReducer = useReducer(reducer$1 ? function (state, action) {\n    return reducer$1(state, action, reducer);\n  } : reducer, options, init),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      _dispatch = _useReducer2[1];\n\n  var dispatch = useCallback(dispatcher ? function (action) {\n    return dispatcher(action, dispatchMiddleware(_dispatch), lastOptions.current);\n  } : dispatchMiddleware(_dispatch), [dispatcher]);\n  var debugLabel = options.debugLabel;\n  var getMeta = useCallback(function (meta) {\n    return _objectSpread({\n      counter: counter.current,\n      promise: lastPromise.current,\n      debugLabel: debugLabel\n    }, meta);\n  }, [debugLabel]);\n  var setData = useCallback(function (data) {\n    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n    if (isMounted.current) {\n      dispatch({\n        type: ActionTypes.fulfill,\n        payload: data,\n        meta: getMeta()\n      });\n      callback();\n    }\n\n    return data;\n  }, [dispatch, getMeta]);\n  var setError = useCallback(function (error) {\n    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n    if (isMounted.current) {\n      dispatch({\n        type: ActionTypes.reject,\n        payload: error,\n        error: true,\n        meta: getMeta()\n      });\n      callback();\n    }\n\n    return error;\n  }, [dispatch, getMeta]);\n  var onResolve = options.onResolve,\n      onReject = options.onReject;\n  var handleResolve = useCallback(function (count) {\n    return function (data) {\n      return count === counter.current && setData(data, function () {\n        return onResolve && onResolve(data);\n      });\n    };\n  }, [setData, onResolve]);\n  var handleReject = useCallback(function (count) {\n    return function (err) {\n      return count === counter.current && setError(err, function () {\n        return onReject && onReject(err);\n      });\n    };\n  }, [setError, onReject]);\n  var start = useCallback(function (promiseFn) {\n    if (\"AbortController\" in globalScope) {\n      abortController.current.abort();\n      abortController.current = new globalScope.AbortController();\n    }\n\n    counter.current++;\n    return lastPromise.current = new Promise(function (resolve, reject) {\n      if (!isMounted.current) return;\n\n      var executor = function executor() {\n        return promiseFn().then(resolve, reject);\n      };\n\n      dispatch({\n        type: ActionTypes.start,\n        payload: executor,\n        meta: getMeta()\n      });\n    });\n  }, [dispatch, getMeta]);\n  var promise = options.promise,\n      promiseFn = options.promiseFn,\n      initialValue = options.initialValue;\n  var load = useCallback(function () {\n    var isPreInitialized = initialValue && counter.current === 0;\n\n    if (promise) {\n      start(function () {\n        return promise;\n      }).then(handleResolve(counter.current)).catch(handleReject(counter.current));\n    } else if (promiseFn && !isPreInitialized) {\n      start(function () {\n        return promiseFn(lastOptions.current, abortController.current);\n      }).then(handleResolve(counter.current)).catch(handleReject(counter.current));\n    }\n  }, [start, promise, promiseFn, initialValue, handleResolve, handleReject]);\n  var deferFn = options.deferFn;\n  var run = useCallback(function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    if (deferFn) {\n      lastArgs.current = args;\n      start(function () {\n        return deferFn(args, lastOptions.current, abortController.current);\n      }).then(handleResolve(counter.current)).catch(handleReject(counter.current));\n    }\n  }, [start, deferFn, handleResolve, handleReject]);\n  var reload = useCallback(function () {\n    lastArgs.current ? run.apply(void 0, _toConsumableArray(lastArgs.current)) : load();\n  }, [run, load]);\n  var onCancel = options.onCancel;\n  var cancel = useCallback(function () {\n    onCancel && onCancel();\n    counter.current++;\n    abortController.current.abort();\n    isMounted.current && dispatch({\n      type: ActionTypes.cancel,\n      meta: getMeta()\n    });\n  }, [onCancel, dispatch, getMeta]);\n  /* These effects should only be triggered on changes to specific props */\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n\n  var watch = options.watch,\n      watchFn = options.watchFn;\n  useEffect(function () {\n    if (watchFn && lastOptions.current && watchFn(options, lastOptions.current)) {\n      lastOptions.current = options;\n      load();\n    }\n  });\n  useEffect(function () {\n    lastOptions.current = options;\n  }, [options]);\n  useEffect(function () {\n    if (counter.current) cancel();\n    if (promise || promiseFn) load();\n  }, [promise, promiseFn, watch]);\n  useEffect(function () {\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  useEffect(function () {\n    return function () {\n      return cancel();\n    };\n  }, []);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  useDebugValue(state, function (_ref8) {\n    var status = _ref8.status;\n    return \"[\".concat(counter.current, \"] \").concat(status);\n  });\n\n  if (options.suspense && state.isPending && lastPromise.current !== neverSettle) {\n    // Rely on Suspense to handle the loading state\n    throw lastPromise.current;\n  }\n\n  return useMemo(function () {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      run: run,\n      reload: reload,\n      cancel: cancel,\n      setData: setData,\n      setError: setError\n    });\n  }, [state, run, reload, cancel, setData, setError]);\n}\n\nvar FetchError = /*#__PURE__*/function (_Error) {\n  _inherits(FetchError, _Error);\n\n  var _super3 = _createSuper(FetchError);\n\n  function FetchError(response) {\n    var _this8;\n\n    _classCallCheck(this, FetchError);\n\n    _this8 = _super3.call(this, \"\".concat(response.status, \" \").concat(response.statusText));\n    _this8.response = response;\n    /* istanbul ignore next */\n\n    if (Object.setPrototypeOf) {\n      // Not available in IE 10, but can be polyfilled\n      Object.setPrototypeOf(_assertThisInitialized(_this8), FetchError.prototype);\n    }\n\n    return _this8;\n  }\n\n  return _createClass(FetchError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar parseResponse = function parseResponse(accept, json) {\n  return function (res) {\n    if (!res.ok) return Promise.reject(new FetchError(res));\n    if (typeof json === \"boolean\") return json ? res.json() : res;\n    return accept === \"application/json\" ? res.json() : res;\n  };\n};\n\nfunction isEvent(e) {\n  return typeof e === \"object\" && \"preventDefault\" in e;\n}\n/**\n *\n * @param {RequestInfo} resource\n * @param {RequestInit} init\n * @param {FetchOptions} options\n * @returns {AsyncState<T, FetchRun<T>>}\n */\n\n\nfunction useAsyncFetch(resource, init) {\n  var _ref9 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      defer = _ref9.defer,\n      json = _ref9.json,\n      options = _objectWithoutProperties(_ref9, _excluded);\n\n  var method = resource.method || init && init.method;\n  var headers = resource.headers || init && init.headers || {};\n  var accept = headers[\"Accept\"] || headers[\"accept\"] || headers.get && headers.get(\"accept\");\n\n  var doFetch = function doFetch(input, init) {\n    return globalScope.fetch(input, init).then(parseResponse(accept, json));\n  };\n\n  var isDefer = typeof defer === \"boolean\" ? defer : [\"POST\", \"PUT\", \"PATCH\", \"DELETE\"].indexOf(method) !== -1;\n  var fn = isDefer ? \"deferFn\" : \"promiseFn\";\n  var identity = JSON.stringify({\n    resource: resource,\n    init: init,\n    isDefer: isDefer\n  });\n  var promiseFn = useCallback(function (_, _ref10) {\n    var signal = _ref10.signal;\n    return doFetch(resource, _objectSpread({\n      signal: signal\n    }, init));\n  }, [identity] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  var deferFn = useCallback(function (_ref11, _, _ref12) {\n    var _ref13 = _slicedToArray(_ref11, 1),\n        override = _ref13[0];\n\n    var signal = _ref12.signal;\n\n    if (!override || isEvent(override)) {\n      return doFetch(resource, _objectSpread({\n        signal: signal\n      }, init));\n    }\n\n    if (typeof override === \"function\") {\n      var _override = override(_objectSpread({\n        resource: resource,\n        signal: signal\n      }, init)),\n          _runResource = _override.resource,\n          _runInit = _objectWithoutProperties(_override, _excluded2);\n\n      return doFetch(_runResource || resource, _objectSpread({\n        signal: signal\n      }, _runInit));\n    }\n\n    var runResource = override.resource,\n        runInit = _objectWithoutProperties(override, _excluded3);\n\n    return doFetch(runResource || resource, _objectSpread(_objectSpread({\n      signal: signal\n    }, init), runInit));\n  }, [identity] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  var state = useAsync(_objectSpread(_objectSpread({}, options), {}, _defineProperty({}, fn, isDefer ? deferFn : promiseFn)));\n  useDebugValue(state, function (_ref14) {\n    var counter = _ref14.counter,\n        status = _ref14.status;\n    return \"[\".concat(counter, \"] \").concat(status);\n  });\n  return state;\n}\n\nvar unsupported = function unsupported() {\n  throw new Error(\"useAsync requires React v16.8 or up. Upgrade your React version or use the <Async> component instead.\");\n};\n\nvar useAsync$1 = useEffect ? useAsync : unsupported;\nvar useFetch = useEffect ? useAsyncFetch : unsupported;\nexport default Async$1;\nexport { ActionTypes, Async$1 as Async, FetchError, IfFulfilled, IfInitial, IfPending, IfRejected, IfSettled, StatusTypes, createInstance, dispatchMiddleware, globalScope, init, neverSettle, reducer, useAsync$1 as useAsync, useFetch };","map":{"version":3,"mappings":"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","names":["globalScope","self","global","GLOBAL","__REACT_ASYNC__","noop","MockAbortController","abort","signal","PropTypes","require","e","childrenFn","oneOfType","node","func","stateObject","shape","initialValue","any","data","error","instanceOf","Error","value","startedAt","Date","finishedAt","status","oneOf","isInitial","bool","isPending","isLoading","isFulfilled","isResolved","isRejected","isSettled","counter","number","promise","Promise","run","reload","cancel","setData","setError","Async","children","promiseFn","deferFn","watch","watchFn","onResolve","onReject","reducer","dispatcher","debugLabel","string","suspense","Initial","state","isRequired","persist","Pending","initial","Fulfilled","Rejected","Settled","renderFn","render","args","IfInitial","React","createElement","Fragment","IfPending","IfFulfilled","IfRejected","IfSettled","propTypes","StatusTypes","getInitialStatus","rejected","undefined","fulfilled","pending","getIdleStatus","getStatusProps","NeverSettle","Object","setPrototypeOf","__proto__","prototype","assign","create","finally","catch","then","neverSettle","ActionTypes","init","action","type","start","meta","fulfill","payload","reject","dispatchMiddleware","dispatch","Component","createInstance","defaultOptions","displayName","createContext","UnguardedConsumer","Consumer","Provider","props","mounted","abortController","bind","load","devToolsDispatcher","_reducer","_dispatcher","asyncReducer","callback","setState","prevProps","AbortController","resolve","executor","getMeta","onCancel","AsyncInitial","st","AsyncPending","AsyncFulfilled","AsyncRejected","AsyncSettled","Loading","Resolved","useAsync","arg1","arg2","options","useRef","isMounted","lastArgs","lastOptions","lastPromise","useReducer","_dispatch","useCallback","current","handleResolve","count","handleReject","err","isPreInitialized","useEffect","useDebugValue","useMemo","FetchError","response","statusText","parseResponse","accept","json","res","ok","isEvent","useAsyncFetch","resource","defer","method","headers","get","doFetch","input","fetch","isDefer","indexOf","fn","identity","JSON","stringify","_","override","runResource","runInit","unsupported","useFetch"],"sources":["F:\\asd\\leandro\\node_modules\\react-async\\dist-src\\globalScope.js","F:\\asd\\leandro\\node_modules\\react-async\\dist-src\\propTypes.js","F:\\asd\\leandro\\node_modules\\react-async\\dist-src\\helpers.js","F:\\asd\\leandro\\node_modules\\react-async\\dist-src\\status.js","F:\\asd\\leandro\\node_modules\\react-async\\dist-src\\reducer.js","F:\\asd\\leandro\\node_modules\\react-async\\dist-src\\Async.js","F:\\asd\\leandro\\node_modules\\react-async\\dist-src\\useAsync.js"],"sourcesContent":["/* istanbul ignore file */\n/**\n * Universal global scope object. In the browser this is `self`, in Node.js and React Native it's `global`.\n * This file is excluded from coverage reporting because these globals are environment-specific so we can't test them all.\n */\nconst globalScope = (() => {\n    if (typeof self === \"object\" && self.self === self)\n        return self;\n    if (typeof global === \"object\" && global.global === global)\n        return global;\n    if (typeof global === \"object\" && global.GLOBAL === global)\n        return global;\n    return {}; // fallback that relies on imported modules to be singletons\n})();\n/**\n * Globally available object used to connect the DevTools to all React Async instances.\n */\nglobalScope.__REACT_ASYNC__ = globalScope.__REACT_ASYNC__ || {};\nexport const noop = () => { };\nexport class MockAbortController {\n    constructor() {\n        this.abort = noop;\n        this.signal = {};\n    }\n}\nexport default globalScope;\n","let PropTypes;\ntry {\n    PropTypes = require(\"prop-types\");\n}\ncatch (e) { }\nconst childrenFn = PropTypes && PropTypes.oneOfType([PropTypes.node, PropTypes.func]);\nconst stateObject = PropTypes &&\n    PropTypes.shape({\n        initialValue: PropTypes.any,\n        data: PropTypes.any,\n        error: PropTypes.instanceOf(Error),\n        value: PropTypes.any,\n        startedAt: PropTypes.instanceOf(Date),\n        finishedAt: PropTypes.instanceOf(Date),\n        status: PropTypes.oneOf([\"initial\", \"pending\", \"fulfilled\", \"rejected\"]),\n        isInitial: PropTypes.bool,\n        isPending: PropTypes.bool,\n        isLoading: PropTypes.bool,\n        isFulfilled: PropTypes.bool,\n        isResolved: PropTypes.bool,\n        isRejected: PropTypes.bool,\n        isSettled: PropTypes.bool,\n        counter: PropTypes.number,\n        promise: PropTypes.instanceOf(Promise),\n        run: PropTypes.func,\n        reload: PropTypes.func,\n        cancel: PropTypes.func,\n        setData: PropTypes.func,\n        setError: PropTypes.func,\n    });\nexport default PropTypes && {\n    Async: {\n        children: childrenFn,\n        promise: PropTypes.instanceOf(Promise),\n        promiseFn: PropTypes.func,\n        deferFn: PropTypes.func,\n        watch: PropTypes.any,\n        watchFn: PropTypes.func,\n        initialValue: PropTypes.any,\n        onResolve: PropTypes.func,\n        onReject: PropTypes.func,\n        reducer: PropTypes.func,\n        dispatcher: PropTypes.func,\n        debugLabel: PropTypes.string,\n        suspense: PropTypes.bool,\n    },\n    Initial: {\n        children: childrenFn,\n        state: stateObject.isRequired,\n        persist: PropTypes.bool,\n    },\n    Pending: {\n        children: childrenFn,\n        state: stateObject.isRequired,\n        initial: PropTypes.bool,\n    },\n    Fulfilled: {\n        children: childrenFn,\n        state: stateObject.isRequired,\n        persist: PropTypes.bool,\n    },\n    Rejected: {\n        children: childrenFn,\n        state: stateObject.isRequired,\n        persist: PropTypes.bool,\n    },\n    Settled: {\n        children: childrenFn,\n        state: stateObject.isRequired,\n        persist: PropTypes.bool,\n    },\n};\n","import React from \"react\";\nimport propTypes from \"./propTypes\";\nconst renderFn = (children, ...args) => {\n    if (typeof children === \"function\") {\n        const render = children;\n        return render(...args);\n    }\n    return children;\n};\n/**\n * Renders only when no promise has started or completed yet.\n *\n * @prop {Function|Node} children Function (passing state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} persist Show until we have data, even while pending (loading) or when an error occurred\n */\nexport const IfInitial = ({ children, persist, state = {}, }) => React.createElement(React.Fragment, null, state.isInitial || (persist && !state.data) ? renderFn(children, state) : null);\n/**\n * Renders only while pending (promise is loading).\n *\n * @prop {Function|Node} children Function (passing state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} initial Show only on initial load (data is undefined)\n */\nexport const IfPending = ({ children, initial, state = {}, }) => React.createElement(React.Fragment, null, state.isPending && (!initial || !state.value) ? renderFn(children, state) : null);\n/**\n * Renders only when promise is resolved.\n *\n * @prop {Function|Node} children Function (passing data and state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} persist Show old data while pending (promise is loading)\n */\nexport const IfFulfilled = ({ children, persist, state = {}, }) => (React.createElement(React.Fragment, null, state.isFulfilled || (persist && state.data) ? renderFn(children, state.data, state) : null));\n/**\n * Renders only when promise is rejected.\n *\n * @prop {Function|Node} children Function (passing error and state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} persist Show old error while pending (promise is loading)\n */\nexport const IfRejected = ({ children, persist, state = {}, }) => (React.createElement(React.Fragment, null, state.isRejected || (persist && state.error) ? renderFn(children, state.error, state) : null));\n/**\n * Renders only when promise is fulfilled or rejected.\n *\n * @prop {Function|Node} children Function (passing state) or React node\n * @prop {Object} state React Async state object\n * @prop {boolean} persist Show old data or error while pending (promise is loading)\n */\nexport const IfSettled = ({ children, persist, state = {}, }) => React.createElement(React.Fragment, null, state.isSettled || (persist && state.value) ? renderFn(children, state) : null);\nif (propTypes) {\n    IfInitial.propTypes = propTypes.Initial;\n    IfPending.propTypes = propTypes.Pending;\n    IfFulfilled.propTypes = propTypes.Fulfilled;\n    IfRejected.propTypes = propTypes.Rejected;\n    IfSettled.propTypes = propTypes.Settled;\n}\n","export var StatusTypes;\n(function (StatusTypes) {\n    StatusTypes[\"initial\"] = \"initial\";\n    StatusTypes[\"pending\"] = \"pending\";\n    StatusTypes[\"fulfilled\"] = \"fulfilled\";\n    StatusTypes[\"rejected\"] = \"rejected\";\n})(StatusTypes || (StatusTypes = {}));\nexport const getInitialStatus = (value, promise) => {\n    if (value instanceof Error)\n        return StatusTypes.rejected;\n    if (value !== undefined)\n        return StatusTypes.fulfilled;\n    if (promise)\n        return StatusTypes.pending;\n    return StatusTypes.initial;\n};\nexport const getIdleStatus = (value) => {\n    if (value instanceof Error)\n        return StatusTypes.rejected;\n    if (value !== undefined)\n        return StatusTypes.fulfilled;\n    return StatusTypes.initial;\n};\nexport const getStatusProps = (status) => ({\n    status,\n    isInitial: status === StatusTypes.initial,\n    isPending: status === StatusTypes.pending,\n    isLoading: status === StatusTypes.pending,\n    isFulfilled: status === StatusTypes.fulfilled,\n    isResolved: status === StatusTypes.fulfilled,\n    isRejected: status === StatusTypes.rejected,\n    isSettled: status === StatusTypes.fulfilled || status === StatusTypes.rejected,\n});\n","import { getInitialStatus, getIdleStatus, getStatusProps, StatusTypes } from \"./status\";\n// This exists to make sure we don't hold any references to user-provided functions\n// The way NeverSettle extends from Promise is complicated, but can't be done differently because Babel doesn't support\n// extending built-in classes. See https://babeljs.io/docs/en/caveats/#classes\nconst NeverSettle = function () { };\n/* istanbul ignore next */\nif (Object.setPrototypeOf) {\n    Object.setPrototypeOf(NeverSettle, Promise);\n}\nelse {\n    ;\n    NeverSettle.__proto__ = Promise;\n}\nNeverSettle.prototype = Object.assign(Object.create(Promise.prototype), {\n    finally() {\n        return this;\n    },\n    catch() {\n        return this;\n    },\n    then() {\n        return this;\n    },\n});\nexport const neverSettle = new NeverSettle();\nexport var ActionTypes;\n(function (ActionTypes) {\n    ActionTypes[\"start\"] = \"start\";\n    ActionTypes[\"cancel\"] = \"cancel\";\n    ActionTypes[\"fulfill\"] = \"fulfill\";\n    ActionTypes[\"reject\"] = \"reject\";\n})(ActionTypes || (ActionTypes = {}));\nexport const init = ({ initialValue, promise, promiseFn, }) => ({\n    initialValue,\n    data: initialValue instanceof Error ? undefined : initialValue,\n    error: initialValue instanceof Error ? initialValue : undefined,\n    value: initialValue,\n    startedAt: promise || promiseFn ? new Date() : undefined,\n    finishedAt: initialValue ? new Date() : undefined,\n    ...getStatusProps(getInitialStatus(initialValue, promise || promiseFn)),\n    counter: 0,\n    promise: neverSettle,\n});\nexport const reducer = (state, action) => {\n    switch (action.type) {\n        case ActionTypes.start:\n            return {\n                ...state,\n                startedAt: new Date(),\n                finishedAt: undefined,\n                ...getStatusProps(StatusTypes.pending),\n                counter: action.meta.counter,\n                promise: action.meta.promise,\n            };\n        case ActionTypes.cancel:\n            return {\n                ...state,\n                startedAt: undefined,\n                finishedAt: undefined,\n                ...getStatusProps(getIdleStatus(state.error || state.data)),\n                counter: action.meta.counter,\n                promise: action.meta.promise,\n            };\n        case ActionTypes.fulfill:\n            return {\n                ...state,\n                data: action.payload,\n                value: action.payload,\n                error: undefined,\n                finishedAt: new Date(),\n                ...getStatusProps(StatusTypes.fulfilled),\n                promise: action.meta.promise,\n            };\n        case ActionTypes.reject:\n            return {\n                ...state,\n                error: action.payload,\n                value: action.payload,\n                finishedAt: new Date(),\n                ...getStatusProps(StatusTypes.rejected),\n                promise: action.meta.promise,\n            };\n        default:\n            return state;\n    }\n};\nexport const dispatchMiddleware = (dispatch) => (action, ...args) => {\n    dispatch(action, ...args);\n    if (action.type === ActionTypes.start && typeof action.payload === \"function\") {\n        action.payload();\n    }\n};\n","import React from \"react\";\nimport globalScope, { MockAbortController } from \"./globalScope\";\nimport { IfInitial, IfPending, IfFulfilled, IfRejected, IfSettled } from \"./helpers\";\nimport propTypes from \"./propTypes\";\nimport { neverSettle, ActionTypes, init, dispatchMiddleware, reducer as asyncReducer, } from \"./reducer\";\nclass Async extends React.Component {\n}\n/**\n * createInstance allows you to create instances of Async that are bound to a specific promise.\n * A unique instance also uses its own React context for better nesting capability.\n */\nexport function createInstance(defaultOptions = {}, displayName = \"Async\") {\n    const { Consumer: UnguardedConsumer, Provider } = React.createContext(undefined);\n    function Consumer({ children }) {\n        return (React.createElement(UnguardedConsumer, null, value => {\n            if (!value) {\n                throw new Error(\"this component should only be used within an associated <Async> component!\");\n            }\n            return children(value);\n        }));\n    }\n    class Async extends React.Component {\n        constructor(props) {\n            super(props);\n            this.mounted = false;\n            this.counter = 0;\n            this.args = [];\n            this.promise = neverSettle;\n            this.abortController = new MockAbortController();\n            this.start = this.start.bind(this);\n            this.load = this.load.bind(this);\n            this.run = this.run.bind(this);\n            this.cancel = this.cancel.bind(this);\n            this.onResolve = this.onResolve.bind(this);\n            this.onReject = this.onReject.bind(this);\n            this.setData = this.setData.bind(this);\n            this.setError = this.setError.bind(this);\n            const promise = props.promise;\n            const promiseFn = props.promiseFn || defaultOptions.promiseFn;\n            const initialValue = props.initialValue || defaultOptions.initialValue;\n            this.state = {\n                ...init({ initialValue, promise, promiseFn }),\n                cancel: this.cancel,\n                run: this.run,\n                reload: () => {\n                    this.load();\n                    this.run(...this.args);\n                },\n                setData: this.setData,\n                setError: this.setError,\n            };\n            this.debugLabel = props.debugLabel || defaultOptions.debugLabel;\n            const { devToolsDispatcher } = globalScope.__REACT_ASYNC__;\n            const _reducer = props.reducer || defaultOptions.reducer;\n            const _dispatcher = props.dispatcher || defaultOptions.dispatcher || devToolsDispatcher;\n            const reducer = _reducer\n                ? (state, action) => _reducer(state, action, asyncReducer)\n                : asyncReducer;\n            const dispatch = dispatchMiddleware((action, callback) => {\n                this.setState(state => reducer(state, action), callback);\n            });\n            this.dispatch = _dispatcher ? action => _dispatcher(action, dispatch, props) : dispatch;\n        }\n        componentDidMount() {\n            this.mounted = true;\n            if (this.props.promise || !this.state.initialValue) {\n                this.load();\n            }\n        }\n        componentDidUpdate(prevProps) {\n            const { watch, watchFn = defaultOptions.watchFn, promise, promiseFn } = this.props;\n            if (watch !== prevProps.watch) {\n                if (this.counter)\n                    this.cancel();\n                return this.load();\n            }\n            if (watchFn &&\n                watchFn({ ...defaultOptions, ...this.props }, { ...defaultOptions, ...prevProps })) {\n                if (this.counter)\n                    this.cancel();\n                return this.load();\n            }\n            if (promise !== prevProps.promise) {\n                if (this.counter)\n                    this.cancel();\n                if (promise)\n                    return this.load();\n            }\n            if (promiseFn !== prevProps.promiseFn) {\n                if (this.counter)\n                    this.cancel();\n                if (promiseFn)\n                    return this.load();\n            }\n        }\n        componentWillUnmount() {\n            this.cancel();\n            this.mounted = false;\n        }\n        getMeta(meta) {\n            return {\n                counter: this.counter,\n                promise: this.promise,\n                debugLabel: this.debugLabel,\n                ...meta,\n            };\n        }\n        start(promiseFn) {\n            if (\"AbortController\" in globalScope) {\n                this.abortController.abort();\n                this.abortController = new globalScope.AbortController();\n            }\n            this.counter++;\n            return (this.promise = new Promise((resolve, reject) => {\n                if (!this.mounted)\n                    return;\n                const executor = () => promiseFn().then(resolve, reject);\n                this.dispatch({ type: ActionTypes.start, payload: executor, meta: this.getMeta() });\n            }));\n        }\n        load() {\n            const promise = this.props.promise;\n            const promiseFn = this.props.promiseFn || defaultOptions.promiseFn;\n            if (promise) {\n                this.start(() => promise)\n                    .then(this.onResolve(this.counter))\n                    .catch(this.onReject(this.counter));\n            }\n            else if (promiseFn) {\n                const props = { ...defaultOptions, ...this.props };\n                this.start(() => promiseFn(props, this.abortController))\n                    .then(this.onResolve(this.counter))\n                    .catch(this.onReject(this.counter));\n            }\n        }\n        run(...args) {\n            const deferFn = this.props.deferFn || defaultOptions.deferFn;\n            if (deferFn) {\n                this.args = args;\n                const props = { ...defaultOptions, ...this.props };\n                return this.start(() => deferFn(args, props, this.abortController)).then(this.onResolve(this.counter), this.onReject(this.counter));\n            }\n        }\n        cancel() {\n            const onCancel = this.props.onCancel || defaultOptions.onCancel;\n            onCancel && onCancel();\n            this.counter++;\n            this.abortController.abort();\n            this.mounted && this.dispatch({ type: ActionTypes.cancel, meta: this.getMeta() });\n        }\n        onResolve(counter) {\n            return (data) => {\n                if (this.counter === counter) {\n                    const onResolve = this.props.onResolve || defaultOptions.onResolve;\n                    this.setData(data, () => onResolve && onResolve(data));\n                }\n                return data;\n            };\n        }\n        onReject(counter) {\n            return (error) => {\n                if (this.counter === counter) {\n                    const onReject = this.props.onReject || defaultOptions.onReject;\n                    this.setError(error, () => onReject && onReject(error));\n                }\n                return error;\n            };\n        }\n        setData(data, callback) {\n            this.mounted &&\n                this.dispatch({ type: ActionTypes.fulfill, payload: data, meta: this.getMeta() }, callback);\n            return data;\n        }\n        setError(error, callback) {\n            this.mounted &&\n                this.dispatch({ type: ActionTypes.reject, payload: error, error: true, meta: this.getMeta() }, callback);\n            return error;\n        }\n        render() {\n            const { children, suspense } = this.props;\n            if (suspense && this.state.isPending && this.promise !== neverSettle) {\n                // Rely on Suspense to handle the loading state\n                throw this.promise;\n            }\n            if (typeof children === \"function\") {\n                const render = children;\n                return React.createElement(Provider, { value: this.state }, render(this.state));\n            }\n            if (children !== undefined && children !== null) {\n                return React.createElement(Provider, { value: this.state }, children);\n            }\n            return null;\n        }\n    }\n    if (propTypes)\n        Async.propTypes = propTypes.Async;\n    const AsyncInitial = props => (React.createElement(Consumer, null, st => React.createElement(IfInitial, Object.assign({}, props, { state: st }))));\n    const AsyncPending = props => (React.createElement(Consumer, null, st => React.createElement(IfPending, Object.assign({}, props, { state: st }))));\n    const AsyncFulfilled = props => (React.createElement(Consumer, null, st => React.createElement(IfFulfilled, Object.assign({}, props, { state: st }))));\n    const AsyncRejected = props => (React.createElement(Consumer, null, st => React.createElement(IfRejected, Object.assign({}, props, { state: st }))));\n    const AsyncSettled = props => (React.createElement(Consumer, null, st => React.createElement(IfSettled, Object.assign({}, props, { state: st }))));\n    AsyncInitial.displayName = `${displayName}.Initial`;\n    AsyncPending.displayName = `${displayName}.Pending`;\n    AsyncFulfilled.displayName = `${displayName}.Fulfilled`;\n    AsyncRejected.displayName = `${displayName}.Rejected`;\n    AsyncSettled.displayName = `${displayName}.Settled`;\n    return Object.assign(Async, {\n        displayName: displayName,\n        Initial: AsyncInitial,\n        Pending: AsyncPending,\n        Loading: AsyncPending,\n        Fulfilled: AsyncFulfilled,\n        Resolved: AsyncFulfilled,\n        Rejected: AsyncRejected,\n        Settled: AsyncSettled,\n    });\n}\nexport default createInstance();\n","import { useCallback, useDebugValue, useEffect, useMemo, useRef, useReducer } from \"react\";\nimport globalScope, { MockAbortController, noop } from \"./globalScope\";\nimport { neverSettle, ActionTypes, init, dispatchMiddleware, reducer as asyncReducer, } from \"./reducer\";\nfunction useAsync(arg1, arg2) {\n    const options = typeof arg1 === \"function\"\n        ? {\n            ...arg2,\n            promiseFn: arg1,\n        }\n        : arg1;\n    const counter = useRef(0);\n    const isMounted = useRef(true);\n    const lastArgs = useRef(undefined);\n    const lastOptions = useRef(options);\n    const lastPromise = useRef(neverSettle);\n    const abortController = useRef(new MockAbortController());\n    const { devToolsDispatcher } = globalScope.__REACT_ASYNC__;\n    const { reducer, dispatcher = devToolsDispatcher } = options;\n    const [state, _dispatch] = useReducer(reducer ? (state, action) => reducer(state, action, asyncReducer) : asyncReducer, options, init);\n    const dispatch = useCallback(dispatcher\n        ? action => dispatcher(action, dispatchMiddleware(_dispatch), lastOptions.current)\n        : dispatchMiddleware(_dispatch), [dispatcher]);\n    const { debugLabel } = options;\n    const getMeta = useCallback((meta) => ({\n        counter: counter.current,\n        promise: lastPromise.current,\n        debugLabel,\n        ...meta,\n    }), [debugLabel]);\n    const setData = useCallback((data, callback = noop) => {\n        if (isMounted.current) {\n            dispatch({\n                type: ActionTypes.fulfill,\n                payload: data,\n                meta: getMeta(),\n            });\n            callback();\n        }\n        return data;\n    }, [dispatch, getMeta]);\n    const setError = useCallback((error, callback = noop) => {\n        if (isMounted.current) {\n            dispatch({\n                type: ActionTypes.reject,\n                payload: error,\n                error: true,\n                meta: getMeta(),\n            });\n            callback();\n        }\n        return error;\n    }, [dispatch, getMeta]);\n    const { onResolve, onReject } = options;\n    const handleResolve = useCallback(count => (data) => count === counter.current && setData(data, () => onResolve && onResolve(data)), [setData, onResolve]);\n    const handleReject = useCallback(count => (err) => count === counter.current && setError(err, () => onReject && onReject(err)), [setError, onReject]);\n    const start = useCallback(promiseFn => {\n        if (\"AbortController\" in globalScope) {\n            abortController.current.abort();\n            abortController.current = new globalScope.AbortController();\n        }\n        counter.current++;\n        return (lastPromise.current = new Promise((resolve, reject) => {\n            if (!isMounted.current)\n                return;\n            const executor = () => promiseFn().then(resolve, reject);\n            dispatch({\n                type: ActionTypes.start,\n                payload: executor,\n                meta: getMeta(),\n            });\n        }));\n    }, [dispatch, getMeta]);\n    const { promise, promiseFn, initialValue } = options;\n    const load = useCallback(() => {\n        const isPreInitialized = initialValue && counter.current === 0;\n        if (promise) {\n            start(() => promise)\n                .then(handleResolve(counter.current))\n                .catch(handleReject(counter.current));\n        }\n        else if (promiseFn && !isPreInitialized) {\n            start(() => promiseFn(lastOptions.current, abortController.current))\n                .then(handleResolve(counter.current))\n                .catch(handleReject(counter.current));\n        }\n    }, [start, promise, promiseFn, initialValue, handleResolve, handleReject]);\n    const { deferFn } = options;\n    const run = useCallback((...args) => {\n        if (deferFn) {\n            lastArgs.current = args;\n            start(() => deferFn(args, lastOptions.current, abortController.current))\n                .then(handleResolve(counter.current))\n                .catch(handleReject(counter.current));\n        }\n    }, [start, deferFn, handleResolve, handleReject]);\n    const reload = useCallback(() => {\n        lastArgs.current ? run(...lastArgs.current) : load();\n    }, [run, load]);\n    const { onCancel } = options;\n    const cancel = useCallback(() => {\n        onCancel && onCancel();\n        counter.current++;\n        abortController.current.abort();\n        isMounted.current &&\n            dispatch({\n                type: ActionTypes.cancel,\n                meta: getMeta(),\n            });\n    }, [onCancel, dispatch, getMeta]);\n    /* These effects should only be triggered on changes to specific props */\n    /* eslint-disable react-hooks/exhaustive-deps */\n    const { watch, watchFn } = options;\n    useEffect(() => {\n        if (watchFn && lastOptions.current && watchFn(options, lastOptions.current)) {\n            lastOptions.current = options;\n            load();\n        }\n    });\n    useEffect(() => {\n        lastOptions.current = options;\n    }, [options]);\n    useEffect(() => {\n        if (counter.current)\n            cancel();\n        if (promise || promiseFn)\n            load();\n    }, [promise, promiseFn, watch]);\n    useEffect(() => () => {\n        isMounted.current = false;\n    }, []);\n    useEffect(() => () => cancel(), []);\n    /* eslint-enable react-hooks/exhaustive-deps */\n    useDebugValue(state, ({ status }) => `[${counter.current}] ${status}`);\n    if (options.suspense && state.isPending && lastPromise.current !== neverSettle) {\n        // Rely on Suspense to handle the loading state\n        throw lastPromise.current;\n    }\n    return useMemo(() => ({\n        ...state,\n        run,\n        reload,\n        cancel,\n        setData,\n        setError,\n    }), [state, run, reload, cancel, setData, setError]);\n}\nexport class FetchError extends Error {\n    constructor(response) {\n        super(`${response.status} ${response.statusText}`);\n        this.response = response;\n        /* istanbul ignore next */\n        if (Object.setPrototypeOf) {\n            // Not available in IE 10, but can be polyfilled\n            Object.setPrototypeOf(this, FetchError.prototype);\n        }\n    }\n}\nconst parseResponse = (accept, json) => (res) => {\n    if (!res.ok)\n        return Promise.reject(new FetchError(res));\n    if (typeof json === \"boolean\")\n        return json ? res.json() : res;\n    return accept === \"application/json\" ? res.json() : res;\n};\nfunction isEvent(e) {\n    return typeof e === \"object\" && \"preventDefault\" in e;\n}\n/**\n *\n * @param {RequestInfo} resource\n * @param {RequestInit} init\n * @param {FetchOptions} options\n * @returns {AsyncState<T, FetchRun<T>>}\n */\nfunction useAsyncFetch(resource, init, { defer, json, ...options } = {}) {\n    const method = resource.method || (init && init.method);\n    const headers = resource.headers || (init && init.headers) || {};\n    const accept = headers[\"Accept\"] || headers[\"accept\"] || (headers.get && headers.get(\"accept\"));\n    const doFetch = (input, init) => globalScope.fetch(input, init).then(parseResponse(accept, json));\n    const isDefer = typeof defer === \"boolean\" ? defer : [\"POST\", \"PUT\", \"PATCH\", \"DELETE\"].indexOf(method) !== -1;\n    const fn = isDefer ? \"deferFn\" : \"promiseFn\";\n    const identity = JSON.stringify({\n        resource,\n        init,\n        isDefer,\n    });\n    const promiseFn = useCallback((_, { signal }) => {\n        return doFetch(resource, { signal, ...init });\n    }, [identity] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n    const deferFn = useCallback(function ([override], _, { signal }) {\n        if (!override || isEvent(override)) {\n            return doFetch(resource, { signal, ...init });\n        }\n        if (typeof override === \"function\") {\n            const { resource: runResource, ...runInit } = override({ resource, signal, ...init });\n            return doFetch(runResource || resource, { signal, ...runInit });\n        }\n        const { resource: runResource, ...runInit } = override;\n        return doFetch(runResource || resource, { signal, ...init, ...runInit });\n    }, [identity] // eslint-disable-line react-hooks/exhaustive-deps\n    );\n    const state = useAsync({\n        ...options,\n        [fn]: isDefer ? deferFn : promiseFn,\n    });\n    useDebugValue(state, ({ counter, status }) => `[${counter}] ${status}`);\n    return state;\n}\nconst unsupported = () => {\n    throw new Error(\"useAsync requires React v16.8 or up. Upgrade your React version or use the <Async> component instead.\");\n};\nexport default useEffect ? useAsync : unsupported;\nexport const useFetch = useEffect ? useAsyncFetch : unsupported;\n"]},"metadata":{},"sourceType":"module"}